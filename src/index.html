<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		
		<title>GPXtruder: Make 3D-printable elevation models of GPX tracks</title>
		
		<script src="js/lightgl.js" type="text/javascript"></script>
		<script src="js/csg.js" type="text/javascript"></script>
		<script src="js/openjscad.js" type="text/javascript"></script>
		<script src="js/proj4-src.js" type="text/javascript"></script>
		<script src="js/vincenty.js" type="text/javascript"></script>
		<script src="js/gpex.js" type="text/javascript"></script>
		<script src="js/ui.js" type="text/javascript"></script>
		
		<link rel="stylesheet" href="css/openjscad.css" type="text/css">
		<link rel="stylesheet" href="css/gpex.css" type="text/css">
	</head>
	<body onLoad="setup();">
		
		<div id="messages"></div>
		
		<div id="intro" class="panel">
		
		<h1>GPXtruder</h1>
		
		<p>Make 3D-printable elevation models of GPX tracks.</p>
		
		<table width="100%">
		<tr>
			<td valign="top" width="33%">
				
				<h2>Step 1</h2>
				
				<p>Go for a run or a ride. Record your route with a GPS watch.</p>
				
				<p class="info">Alternatively, export a route from a site like <a href="https://strava.zendesk.com/entries/22555481-Exporting-your-Data-and-Bulk-Export">Strava</a> or <a href="https://support.mapmyfitness.com/hc/en-us/articles/200118304-Exporting-Routes">MapMyRun</a>. Add elevations with <a href="http://www.gpsvisualizer.com/elevation">GPS Visualizer</a>.</p>
				
			</td>
			
			<td valign="top" width="33%">
				
				<h2>Step 2</h2>
				
				<p>Use this site to convert your route to a 3D elevation map.</p>
				
				<p class="info">Upload a GPX file. Download an STL file or copy the output code and make a remix of your model.</p>
				
			</td>
			
			<td valign="top" width="33%">
				
				<h2>Step 3</h2>
				
				<p>Print your route model on a 3D printer. Show off those hills!</p>
				
				<p class="info">Don't have a printer? Check out <a href="http://www.3dhubs.com/">3D Hubs</a> to find one near you, or try a service like <a href="http://www.shapeways.com/">Shapeways</a>.</p>
			</td>
		</tr>
		</table>
		
		</div>
		
		<div id="input" class="panel">
				
		<form enctype="multipart/form-data" method="post" name="gpxform">
			<p>GPX file with elevation: <input type="file" id="gpxfile" required></input><br />
			   <span class="info">Use <a href="http://www.gpsvisualizer.com/elevation">GPS Visualizer</a> to add elevation data to your GPX file.</span></p>
			
			<h3><span onclick="toggleDivDisplay('config-route', 'config-route-link');" id="config-route-link" class="config-link inactive">Route</span></h3>
			
			<div id="config-route" class="config-group">
			<p>Vertical exaggeration: <input type="text" size="10" id="vertical" required value="5"></input><br />
			   <span class="info">Enhance elevation changes by this factor.</span></p>
			<p>Clip to minimum elevation: <input type="checkbox" id="zcut" value="1" checked></input><br />
			   <span class="info">Disable to depict full elevation above sea level.</span></p>
			<p>Minimum distance between points: <input type="text" size="10" id="mindist" required value="0"></input> (meters) <br />
			   <span class="info">Discard points that are too close together. A nonzero minimum distance will simplify the output model but will alter the exact shape and length of the route.</span></p>
			</div>
			
			<h3><span onclick="toggleDivDisplay('config-model', 'config-model-link');" id="config-model-link" class="config-link inactive">Model</span></h3>
			
			<div id="config-model" class="config-group">
			<p>Shape: <input type="radio" name="shape" value="0" id="shape_track" checked /> <label for="shape_track">Track</label>
					  <input type="radio" name="shape" value="1" id="shape_linear" /> <label for="shape_linear">Linear</label>
					  <input type="radio" name="shape" value="2" id="shape_ring" /> <label for="shape_ring">Ring</label><br />
			   <span class="info">Select <em>track</em> for a model of the actual route. Select <em>linear</em> for a straight elevation profile. Select <em>ring</em> for an elevation profile wrapped in a circle.</span></p>
			<p>Markers: <input type="radio" name="marker" value="0" id="marker_none" checked /> <label for="marker_none">None</label>
						<input type="radio" name="marker" value="1000" id="marker_km" /> <label for="marker_km">Kilometers</label>
						<input type="radio" name="marker" value="1609" id="marker_mi" /> <label for="marker_mi">Miles</label><br />
			   <span class="info">If enabled, a secondary model is generated representing the position of each mile or kilometer marker.</span></p>
			</div>
			
			<h3><span onclick="toggleDivDisplay('config-size', 'config-size-link');" id="config-size-link" class="config-link inactive">Size</span></h3>
			
			<div id="config-size" class="config-group">
			<p>Bed width (x): <input type="text" size="10" id="width" required value="180"></input> (mm)<br />
			   Bed depth (y) <input type="text" size="10" id="depth" required value="90"></input> (mm)<br />
			   <span class="info">Output is scaled to fit within these dimensions.</span></p>
			<p>Path width: <input type="text" size="10" id="path_width" required value="2"></input> (mm)<br />
			   <span class="info">Thickness of the output path.</span></p>
			<p>Base height: <input type="text" size="10" id="base" required value="0"></input> (mm)<br />
			   <span class="info">Extra height added to the bottom of the route model.</span></p>
			</div>
			
			<p><input type="submit" value="Convert"></input></p>
		</form>
		
		</div>
		
		<div id="output" class="panel">
				
		<div id="display"></div>
		
		<p></p>
		
		<h3><span onclick="toggleDivDisplay('output-code', 'output-code-link');" id="output-code-link" class="config-link inactive">Code</span></h3>
		
		<div id="output-code" class="config-group">
		<p><span class="info">To customize the model, paste this code into <a href="http://openjscad.org/">OpenJSCAD.org</a> (left) or <a href="http://www.openscad.org/">OpenSCAD</a> (right):</span><br />
		<textarea id="code_jscad" cols="40" rows="10"></textarea>
		<textarea id="code_openscad" cols="40" rows="10"></textarea></p>
		</div>
		
		</div>
		
		<div id="footer" class="panel">
		<p class="info">This is the fine print your mother warned you about.</p>
		</div>
		
		
	</body>
</html>
