<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<title>GPXtruder: Make 3D-printable elevation models of GPX tracks</title>
		<script src="js/lightgl.js" type="text/javascript"></script>
		<script src="js/csg.js" type="text/javascript"></script>
		<script src="js/openjscad.js" type="text/javascript"></script>
		<script src="js/proj4.js" type="text/javascript"></script>
		<script src="js/vincenty.js" type="text/javascript"></script>
		<script src="js/gpxtruder.js" type="text/javascript"></script>
		<script src="js/details-shim.js" type="text/javascript"></script>
		<script src="js/jspdf.min.js" type="text/javascript"></script>
		<link rel="stylesheet" href="css/details-shim.css" type="text/css">
		<link rel="stylesheet" href="css/gpxtruder.css" type="text/css">
		<link rel="apple-touch-icon" sizes="152x152" href="img/apple-touch-icon-152-152.png">
		<link rel="shortcut icon" href="img/favicon.ico" />
		<script type="text/javascript">
			function toggle(event, onvalue, toggleid) {
				if (event.target.value == onvalue) {
					document.getElementById(toggleid).disabled = false;
				} else {
					document.getElementById(toggleid).disabled = true;
				}
				return true;
			}
		</script>
	</head>
	<body onLoad="setup();">
		
		<div id="messages"></div>
		
		<div id="intro" class="panel">
			<p><img src="img/title.png" alt="GPXtruder: Make 3D-printable models of GPX tracks" /></p>
			<table id="howto">
				<tr>
					<td>
						<p><img src="img/step1.png" alt="Step 1" /></p>
						<p>Go for a run or a ride. Record your route with a GPS watch.</p>
						<p class="info">Alternatively, export a route from a site like <a href="https://strava.zendesk.com/entries/22555481-Exporting-your-Data-and-Bulk-Export">Strava</a> or <a href="https://support.mapmyfitness.com/hc/en-us/articles/200118304-Exporting-Routes">MapMyRun</a>. Add elevations with <a href="http://www.gpsvisualizer.com/elevation">GPS Visualizer</a>.</p>
					</td>
					<td>
						<p><img src="img/step2.png" alt="Step 2" /></p>
						<p>Use GPXtruder to convert your route to a 3D elevation map.</p>
						<p class="info">Upload a GPX file. Download an STL file or copy the output code to make a remix of your model.</p>
					</td>
					<td>
						<p><img src="img/step3.png" alt="Step 3" /></p>
						<p>Print your route model on a 3D printer. Show off those hills!</p>
						<p class="info">Don't have a printer? Check out <a href="http://www.3dhubs.com/">3D Hubs</a> to find one near you, or try a service like <a href="http://www.shapeways.com/">Shapeways</a>.</p>
					</td>
				</tr>
			</table>
			<p>GPXtruder is an open-source project. For help, examples, or feedback, please visit <a href="https://github.com/anoved/gpxtruder">the project page</a>.</p>
		</div>
		
		<div id="input" class="panel">
			<p class="iolabel"><img src="img/input.png" width="129" height="31" alt="Input" /></p>
			<form enctype="multipart/form-data" method="get" name="gpxform">
				<p><input type="radio" name="gpxsource" value="0" id="gpxsource_upload" onchange="return toggle(event, 0, 'gpxfile') && toggle(event, 1, 'gpxsample');" checked /> <label for="gpxsource_upload">Upload GPX:</label>
					<input type="file" id="gpxfile" /><br />
				   <input type="radio" name="gpxsource" value="1" id="gpxsource_sample" onchange="return toggle(event, 0, 'gpxfile') && toggle(event, 1, 'gpxsample');" /> <label for="gpxsource_sample">Sample GPX:</label>
					<select id="gpxsample" disabled>
						<option value="0" selected>South Mountain</option>
					</select></p>
				<details>
					<summary>Route</summary>
					<div class="group">
						<p>Vertical exaggeration: <input type="number" id="vertical" required min="1" step="0.1" value="5" /><br />
						   <span class="info">Multiply elevation values by this factor to enhance terrain.</span></p>
						<p>Clip to minimum elevation: <input type="checkbox" id="zcut" value="1" checked /><br />
						   <span class="info">Uncheck to show full elevation above sea level.</span></p>
						<p>Smoothing: <input type="radio" name="smooth" value="0" id="smooth_auto" onchange="return toggle(event, 1, 'mindist');" checked /> <label for="smooth_auto">Automatic</label> <input type="radio" name="smooth" value="1" id="smooth_manual" onchange="return toggle(event, 1, 'mindist');" /> <label for="smooth_manual">Manual minimum interval:</label> <input type="number" id="mindist" required min="0" step="1" value="0" disabled /> (meters)<br />
						   <span class="info">Simplify the route by discarding points that are close together. Automatic smoothing computes interval based on model shape, size, and scale.</span></p>
					</div>
				</details>
				<details>
					<summary>Model</summary>
					<div class="group">
						<p>Shape: <input type="radio" name="shape" value="0" id="shape_track" checked /> <label for="shape_track">Track</label>
								  <input type="radio" name="shape" value="1" id="shape_linear" /> <label for="shape_linear">Linear</label>
								  <input type="radio" name="shape" value="2" id="shape_ring" /> <label for="shape_ring">Ring</label><br />
						   <span class="info">Select <em>track</em> for a model of the actual route. Select <em>linear</em> for a straight elevation profile. Select <em>ring</em> for an elevation profile wrapped in a circle.</span></p>
						<p>Markers: <input type="radio" name="marker" value="0" id="marker_none" onchange="return toggle(event, 3, 'marker_interval');" checked /> <label for="marker_none">None</label>
									<input type="radio" name="marker" value="1" id="marker_km" onchange="return toggle(event, 3, 'marker_interval');" /> <label for="marker_km">Kilometers</label>
									<input type="radio" name="marker" value="2" id="marker_mi" onchange="return toggle(event, 3, 'marker_interval');" /> <label for="marker_mi">Miles</label>
									<input type="radio" name="marker" value="3" id="marker_other" onchange="return toggle(event, 3, 'marker_interval');" /> <label for="marker_other">Other interval:</label> <input type="number" id="marker_interval" min="1" value="8047" disabled /> (meters)<br />
						   <span class="info">If enabled, a secondary model is generated representing the position of each mile or kilometer marker.</span></p>
					</div>
				</details>
				<details>
					<summary>Size</summary>
					<div class="group">
						<p>Bed width (x): <input type="number" id="width" required min="20" step="1" value="180" /> (mm)<br />
						   Bed depth (y) <input type="number" id="depth" required min="20" step="1" value="90" /> (mm)<br />
						   <span class="info">Output is scaled to fit these dimensions. Bed outline appears as black border on base map in 3D preview.</span></p>
						<p>Path width: <input type="number" id="path_width" required min="1" step="1" value="2" /> (mm)<br />
						   <span class="info">Thickness of the output path.</span></p>
						<p>Base height: <input type="number" id="base" required min="0" step="1" value="1" /> (mm)<br />
						   <span class="info">Extra height added to the bottom of the route model.</span></p>
					</div>
				</details>
				<p><input type="button" onclick="submitInput();" value="Extrude Route" /> <span class="info">Then click <em>Generate STL</em> in the <em>Output</em> panel below to download the 3D model.</span></p>
			</form>
		</div>
		
		<div id="promo" class="panel">
			<p class="iolabel"><img src="img/ads.png" width="83" height="31" alt="Ads" /></p>
			
			<p style="margin-top: 0;">Advertisements support GPXtruder development, including bug fixes and new features. Want to promote a related site, service, or event? Featured sponsorships are available.</p>
			
			<p style="text-align:center;">
				<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
				<!-- GPXtruder -->
				<ins class="adsbygoogle"
					 style="display:inline-block;width:728px;height:90px"
					 data-ad-client="ca-pub-1132312558144322"
					 data-ad-slot="9923034916"></ins>
				<script>
				(adsbygoogle = window.adsbygoogle || []).push({});
				</script>
			</p>
		</div>
		
		<div id="output" class="panel">
			<p class="iolabel"><img src="img/output.png" width="166" height="31" alt="Output" /></p>
			<div id="display"></div>
			<details>
				<summary>Parametric CAD Scripts</summary>
				<div class="group">
					<p>Remix the extruded route model by tinkering with this code. Batteries not included.</p>
					<table id="outputcode">
						<tr>
							<td>
								<textarea id="code_jscad" class="codebox" cols="40" rows="6"></textarea>
								<p class="info"><a href="javascript:void(0)" onclick="document.getElementById('code_jscad').select();">Select all</a>, copy, and paste in <a href="http://openjscad.org/">OpenJSCAD.org</a>.</p>
							</td>
							<td>
								<textarea id="code_openscad" class="codebox" cols="40" rows="6"></textarea>
								<p class="info"><a href="javascript:void(0)" onclick="document.getElementById('code_openscad').select();">Select all</a>, copy, and paste in <a href="http://www.openscad.org/">OpenSCAD</a>.</p>
							</td>
						</tr>
					</table>
				</div>
			</details>
		</div>
		
		<div id="footer" class="panel">
			<p class="info">GPXtruder is not affiliated with Strava, MapMyRun, GPS Visualizer, 3D Hubs, Shapeways, Garmin, Printrbot, or any other sites, products, or services. All trademarks and registered trademarks are the property of their respective owners. This is the fine print your mother warned you about.</p>
		</div>
		
	</body>
</html>
